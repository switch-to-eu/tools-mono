# CoTURN Configuration for Nully App
# High-performance TURN server configuration

# Listening interfaces and ports
listening-port=3478
tls-listening-port=5349
alt-listening-port=80
alt-tls-listening-port=443

# External IP (set this to your server's public IP)
# external-ip=YOUR_SERVER_PUBLIC_IP

# Relay interfaces
relay-ip=0.0.0.0

# Authentication (configured at runtime via environment variables)
# user=USERNAME:PASSWORD
# Or use dynamic auth with secret
use-auth-secret
# static-auth-secret=SECRET

# Security settings
fingerprint
lt-cred-mech

# Enable both UDP and TCP relay
no-udp-relay=false
no-tcp-relay=false

# Logging
verbose
log-file=/var/log/turnserver.log

# Performance tuning
max-bps=100000
total-quota=100
user-quota=50

# Realm (your domain)
realm=nully.app

# TLS/DTLS settings (optional but recommended)
# cert=/etc/coturn/cert.pem
# pkey=/etc/coturn/private.key

# Additional security
no-cli
no-loopback-peers
no-multicast-peers

# Enable STUN
stun-only=false

# Database (optional - for production use PostgreSQL/MySQL)
# psql-userdb="host=db dbname=coturn user=coturn password=yourpassword"

# WebRTC compatibility
mobility
keep-address-family

# Disable TLS v1.0/1.1 for security
no-tlsv1
no-tlsv1_1

# Enable modern cipher suites
cipher-list="ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256"

# Misc settings
prod
check-origin-consistency